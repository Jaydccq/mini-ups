<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Truck.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Mini UPS Backend</a> &gt; <a href="index.source.html" class="el_package">com.miniups.model.entity</a> &gt; <span class="el_source">Truck.java</span></div><h1>Truck.java</h1><pre class="source lang-java linenums">/**
 * 卡车实体类
 * 
 * 功能说明：
 * - 管理UPS运输车辆的基本信息和实时状态
 * - 记录卡车位置、载重能力、当前任务等
 * - 与运输订单建立一对多关系（一辆卡车可同时处理多个订单）
 * 
 * 主要字段：
 * - truckId: 卡车在世界模拟器中的唯一标识
 * - status: 卡车状态(IDLE/BUSY/MAINTENANCE/OUT_OF_SERVICE)
 * - currentX/currentY: 当前位置坐标
 * - capacity: 载重能力
 * - currentLoad: 当前载重
 * 
 * 数据库设计：
 * - 表名: trucks
 * - 索引: truck_id、status（用于快速查找可用卡车）
 * - 外键关联: shipments（当前承载的运输任务）
 * 
 * 业务逻辑：
 * - 卡车调度算法根据距离和载重分配任务
 * - 实时位置更新用于追踪和路径优化
 * - 支持多包裹配送路径规划
 * 
 * @author Mini-UPS Team
 * @version 1.0.0
 */
package com.miniups.model.entity;

import com.miniups.model.enums.TruckStatus;
import jakarta.persistence.*;
import jakarta.validation.constraints.Min;
import jakarta.validation.constraints.NotNull;

import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = &quot;trucks&quot;, indexes = {
    @Index(name = &quot;idx_truck_truck_id&quot;, columnList = &quot;truck_id&quot;),
    @Index(name = &quot;idx_truck_status&quot;, columnList = &quot;status&quot;)
})
public class Truck extends BaseEntity {
    
    @NotNull
    @Column(name = &quot;truck_id&quot;, nullable = false, unique = true)
    private Integer truckId;
    
<span class="pc" id="L50">    @Enumerated(EnumType.STRING)</span>
    @Column(name = &quot;status&quot;, nullable = false, length = 20)
    private TruckStatus status = TruckStatus.IDLE;
    
<span class="pc" id="L54">    @Min(0)</span>
    @Column(name = &quot;current_x&quot;, nullable = false)
<span class="pc" id="L56">    private Integer currentX = 0;</span>
    
<span class="pc" id="L58">    @Min(0)</span>
    @Column(name = &quot;current_y&quot;, nullable = false)
<span class="pc" id="L60">    private Integer currentY = 0;</span>
    
<span class="pc" id="L62">    @Min(1)</span>
    @Column(name = &quot;capacity&quot;, nullable = false)
<span class="pc" id="L64">    private Integer capacity = 100;</span>
    
    @Column(name = &quot;driver_id&quot;)
    private Long driverId;
    
    @Column(name = &quot;world_id&quot;)
    private Long worldId;
    
    @Column(name = &quot;license_plate&quot;)
    private String licensePlate;
    
<span class="pc" id="L75">    @Column(name = &quot;current_load&quot;)</span>
<span class="pc" id="L76">    private Double currentLoad = 0.0;</span>
    
    // Relationships
<span class="pc" id="L79">    @OneToMany(mappedBy = &quot;truck&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)</span>
    private List&lt;Shipment&gt; shipments = new ArrayList&lt;&gt;();
    
<span class="pc" id="L82">    @OneToMany(mappedBy = &quot;truck&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)</span>
    private List&lt;TruckLocationHistory&gt; locationHistory = new ArrayList&lt;&gt;();
    
    // Constructors
<span class="fc" id="L86">    public Truck() {}</span>
    
<span class="nc" id="L88">    public Truck(Integer truckId, Integer capacity) {</span>
<span class="nc" id="L89">        this.truckId = truckId;</span>
<span class="nc" id="L90">        this.capacity = capacity;</span>
<span class="nc" id="L91">    }</span>
    
    // Getters and Setters
    public Integer getTruckId() {
<span class="nc" id="L95">        return truckId;</span>
    }
    
    public void setTruckId(Integer truckId) {
<span class="nc" id="L99">        this.truckId = truckId;</span>
<span class="nc" id="L100">    }</span>
    
    public TruckStatus getStatus() {
<span class="nc" id="L103">        return status;</span>
    }
    
    public void setStatus(TruckStatus status) {
<span class="nc" id="L107">        this.status = status;</span>
<span class="nc" id="L108">    }</span>
    
    public Integer getCurrentX() {
<span class="nc" id="L111">        return currentX;</span>
    }
    
    public void setCurrentX(Integer currentX) {
<span class="nc" id="L115">        this.currentX = currentX;</span>
<span class="nc" id="L116">    }</span>
    
    public Integer getCurrentY() {
<span class="nc" id="L119">        return currentY;</span>
    }
    
    public void setCurrentY(Integer currentY) {
<span class="nc" id="L123">        this.currentY = currentY;</span>
<span class="nc" id="L124">    }</span>
    
    public Integer getCapacity() {
<span class="nc" id="L127">        return capacity;</span>
    }
    
    public void setCapacity(Integer capacity) {
<span class="nc" id="L131">        this.capacity = capacity;</span>
<span class="nc" id="L132">    }</span>
    
    public Long getDriverId() {
<span class="nc" id="L135">        return driverId;</span>
    }
    
    public void setDriverId(Long driverId) {
<span class="nc" id="L139">        this.driverId = driverId;</span>
<span class="nc" id="L140">    }</span>
    
    public Long getWorldId() {
<span class="nc" id="L143">        return worldId;</span>
    }
    
    public void setWorldId(Long worldId) {
<span class="nc" id="L147">        this.worldId = worldId;</span>
<span class="nc" id="L148">    }</span>
    
    public List&lt;Shipment&gt; getShipments() {
<span class="nc" id="L151">        return shipments;</span>
    }
    
    public void setShipments(List&lt;Shipment&gt; shipments) {
<span class="nc" id="L155">        this.shipments = shipments;</span>
<span class="nc" id="L156">    }</span>
    
    public List&lt;TruckLocationHistory&gt; getLocationHistory() {
<span class="nc" id="L159">        return locationHistory;</span>
    }
    
    public void setLocationHistory(List&lt;TruckLocationHistory&gt; locationHistory) {
<span class="nc" id="L163">        this.locationHistory = locationHistory;</span>
<span class="nc" id="L164">    }</span>
    
    public String getLicensePlate() {
<span class="nc" id="L167">        return licensePlate;</span>
    }
    
    public void setLicensePlate(String licensePlate) {
<span class="nc" id="L171">        this.licensePlate = licensePlate;</span>
<span class="nc" id="L172">    }</span>
    
    public Double getCurrentLoad() {
<span class="nc" id="L175">        return currentLoad;</span>
    }
    
    public void setCurrentLoad(Double currentLoad) {
<span class="nc" id="L179">        this.currentLoad = currentLoad;</span>
<span class="nc" id="L180">    }</span>
    
    
    // Helper methods
    public boolean isAvailable() {
<span class="nc bnc" id="L185" title="All 2 branches missed.">        return status == TruckStatus.IDLE;</span>
    }
    
    public void updateLocation(Integer x, Integer y) {
<span class="nc" id="L189">        this.currentX = x;</span>
<span class="nc" id="L190">        this.currentY = y;</span>
<span class="nc" id="L191">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>