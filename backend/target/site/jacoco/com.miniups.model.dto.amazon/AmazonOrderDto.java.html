<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AmazonOrderDto.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Mini UPS Backend</a> &gt; <a href="index.source.html" class="el_package">com.miniups.model.dto.amazon</a> &gt; <span class="el_source">AmazonOrderDto.java</span></div><h1>AmazonOrderDto.java</h1><pre class="source lang-java linenums">/**
 * Amazon Order Data Transfer Object
 * 
 * 功能说明：
 * - 处理Amazon系统与UPS系统之间的订单数据传输
 * - 标准化Amazon订单信息的格式和验证
 * - 支持Amazon API集成和webhook通信
 * 
 * 数据字段：
 * - orderId: Amazon订单ID
 * - customerId: 客户ID
 * - items: 订单商品列表
 * - shippingAddress: 配送地址信息
 * - dimensions: 包裹尺寸和重量
 * 
 * 验证规则：
 * - 必填字段验证
 * - 地址格式验证
 * - 重量和尺寸范围检查
 * - 商品数量合理性验证
 * 
 * @author Mini-UPS Team
 * @version 1.0.0
 */
package com.miniups.model.dto.amazon;

import jakarta.validation.Valid;
import jakarta.validation.constraints.*;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

public class AmazonOrderDto {
    
    @NotBlank(message = &quot;Amazon order ID cannot be blank&quot;)
    @Size(max = 100, message = &quot;Order ID must not exceed 100 characters&quot;)
    private String orderId;
    
    @NotBlank(message = &quot;Customer ID cannot be blank&quot;)
    @Size(max = 50, message = &quot;Customer ID must not exceed 50 characters&quot;)
    private String customerId;
    
    @NotBlank(message = &quot;Customer name cannot be blank&quot;)
    @Size(max = 100, message = &quot;Customer name must not exceed 100 characters&quot;)
    private String customerName;
    
    @Email(message = &quot;Invalid email format&quot;)
    @NotBlank(message = &quot;Customer email cannot be blank&quot;)
    private String customerEmail;
    
    @Valid
    @NotNull(message = &quot;Shipping address is required&quot;)
    private ShippingAddressDto shippingAddress;
    
<span class="nc" id="L57">    @Valid</span>
    @NotEmpty(message = &quot;Order must contain at least one item&quot;)
    private List&lt;OrderItemDto&gt; items = new ArrayList&lt;&gt;();
    
    @DecimalMin(value = &quot;0.1&quot;, message = &quot;Total weight must be at least 0.1 kg&quot;)
    @DecimalMax(value = &quot;50.0&quot;, message = &quot;Total weight cannot exceed 50 kg&quot;)
    private BigDecimal totalWeight;
    
    @DecimalMin(value = &quot;0.01&quot;, message = &quot;Total value must be positive&quot;)
    private BigDecimal totalValue;
    
<span class="nc" id="L68">    @Pattern(regexp = &quot;STANDARD|EXPRESS|OVERNIGHT&quot;, message = &quot;Invalid shipping priority&quot;)</span>
    private String shippingPriority = &quot;STANDARD&quot;;
    
    private LocalDateTime orderDate;
    private LocalDateTime requestedDeliveryDate;
    
    @Size(max = 500, message = &quot;Special instructions must not exceed 500 characters&quot;)
    private String specialInstructions;
    
<span class="nc" id="L77">    private Boolean requiresSignature = false;</span>
<span class="nc" id="L78">    private Boolean fragile = false;</span>
<span class="nc" id="L79">    private Boolean hazardous = false;</span>
    
    // Constructors
<span class="nc" id="L82">    public AmazonOrderDto() {</span>
<span class="nc" id="L83">        this.orderDate = LocalDateTime.now();</span>
<span class="nc" id="L84">    }</span>
    
    public AmazonOrderDto(String orderId, String customerId, String customerName, String customerEmail) {
<span class="nc" id="L87">        this();</span>
<span class="nc" id="L88">        this.orderId = orderId;</span>
<span class="nc" id="L89">        this.customerId = customerId;</span>
<span class="nc" id="L90">        this.customerName = customerName;</span>
<span class="nc" id="L91">        this.customerEmail = customerEmail;</span>
<span class="nc" id="L92">    }</span>
    
    // Getters and Setters
    public String getOrderId() {
<span class="nc" id="L96">        return orderId;</span>
    }
    
    public void setOrderId(String orderId) {
<span class="nc" id="L100">        this.orderId = orderId;</span>
<span class="nc" id="L101">    }</span>
    
    public String getCustomerId() {
<span class="nc" id="L104">        return customerId;</span>
    }
    
    public void setCustomerId(String customerId) {
<span class="nc" id="L108">        this.customerId = customerId;</span>
<span class="nc" id="L109">    }</span>
    
    public String getCustomerName() {
<span class="nc" id="L112">        return customerName;</span>
    }
    
    public void setCustomerName(String customerName) {
<span class="nc" id="L116">        this.customerName = customerName;</span>
<span class="nc" id="L117">    }</span>
    
    public String getCustomerEmail() {
<span class="nc" id="L120">        return customerEmail;</span>
    }
    
    public void setCustomerEmail(String customerEmail) {
<span class="nc" id="L124">        this.customerEmail = customerEmail;</span>
<span class="nc" id="L125">    }</span>
    
    public ShippingAddressDto getShippingAddress() {
<span class="nc" id="L128">        return shippingAddress;</span>
    }
    
    public void setShippingAddress(ShippingAddressDto shippingAddress) {
<span class="nc" id="L132">        this.shippingAddress = shippingAddress;</span>
<span class="nc" id="L133">    }</span>
    
    public List&lt;OrderItemDto&gt; getItems() {
<span class="nc" id="L136">        return items;</span>
    }
    
    public void setItems(List&lt;OrderItemDto&gt; items) {
<span class="nc" id="L140">        this.items = items;</span>
<span class="nc" id="L141">    }</span>
    
    public BigDecimal getTotalWeight() {
<span class="nc" id="L144">        return totalWeight;</span>
    }
    
    public void setTotalWeight(BigDecimal totalWeight) {
<span class="nc" id="L148">        this.totalWeight = totalWeight;</span>
<span class="nc" id="L149">    }</span>
    
    public BigDecimal getTotalValue() {
<span class="nc" id="L152">        return totalValue;</span>
    }
    
    public void setTotalValue(BigDecimal totalValue) {
<span class="nc" id="L156">        this.totalValue = totalValue;</span>
<span class="nc" id="L157">    }</span>
    
    public String getShippingPriority() {
<span class="nc" id="L160">        return shippingPriority;</span>
    }
    
    public void setShippingPriority(String shippingPriority) {
<span class="nc" id="L164">        this.shippingPriority = shippingPriority;</span>
<span class="nc" id="L165">    }</span>
    
    public LocalDateTime getOrderDate() {
<span class="nc" id="L168">        return orderDate;</span>
    }
    
    public void setOrderDate(LocalDateTime orderDate) {
<span class="nc" id="L172">        this.orderDate = orderDate;</span>
<span class="nc" id="L173">    }</span>
    
    public LocalDateTime getRequestedDeliveryDate() {
<span class="nc" id="L176">        return requestedDeliveryDate;</span>
    }
    
    public void setRequestedDeliveryDate(LocalDateTime requestedDeliveryDate) {
<span class="nc" id="L180">        this.requestedDeliveryDate = requestedDeliveryDate;</span>
<span class="nc" id="L181">    }</span>
    
    public String getSpecialInstructions() {
<span class="nc" id="L184">        return specialInstructions;</span>
    }
    
    public void setSpecialInstructions(String specialInstructions) {
<span class="nc" id="L188">        this.specialInstructions = specialInstructions;</span>
<span class="nc" id="L189">    }</span>
    
    public Boolean getRequiresSignature() {
<span class="nc" id="L192">        return requiresSignature;</span>
    }
    
    public void setRequiresSignature(Boolean requiresSignature) {
<span class="nc" id="L196">        this.requiresSignature = requiresSignature;</span>
<span class="nc" id="L197">    }</span>
    
    public Boolean getFragile() {
<span class="nc" id="L200">        return fragile;</span>
    }
    
    public void setFragile(Boolean fragile) {
<span class="nc" id="L204">        this.fragile = fragile;</span>
<span class="nc" id="L205">    }</span>
    
    public Boolean getHazardous() {
<span class="nc" id="L208">        return hazardous;</span>
    }
    
    public void setHazardous(Boolean hazardous) {
<span class="nc" id="L212">        this.hazardous = hazardous;</span>
<span class="nc" id="L213">    }</span>
    
    // Helper methods
    public void addItem(OrderItemDto item) {
<span class="nc bnc" id="L217" title="All 2 branches missed.">        if (this.items == null) {</span>
<span class="nc" id="L218">            this.items = new ArrayList&lt;&gt;();</span>
        }
<span class="nc" id="L220">        this.items.add(item);</span>
<span class="nc" id="L221">    }</span>
    
    public int getTotalItemCount() {
<span class="nc" id="L224">        return items.stream().mapToInt(OrderItemDto::getQuantity).sum();</span>
    }
    
    public boolean isHighPriority() {
<span class="nc bnc" id="L228" title="All 4 branches missed.">        return &quot;EXPRESS&quot;.equals(shippingPriority) || &quot;OVERNIGHT&quot;.equals(shippingPriority);</span>
    }
    
    public boolean hasSpecialHandlingRequirements() {
<span class="nc bnc" id="L232" title="All 6 branches missed.">        return fragile || hazardous || requiresSignature;</span>
    }
    
    // Nested DTOs
    public static class ShippingAddressDto {
        @NotBlank(message = &quot;Street address cannot be blank&quot;)
        private String street;
        
        @NotBlank(message = &quot;City cannot be blank&quot;)
        private String city;
        
        @NotBlank(message = &quot;State cannot be blank&quot;)
        private String state;
        
        @Pattern(regexp = &quot;\\d{5}(-\\d{4})?&quot;, message = &quot;Invalid ZIP code format&quot;)
        private String zipCode;
        
<span class="nc" id="L249">        @NotBlank(message = &quot;Country cannot be blank&quot;)</span>
        private String country = &quot;USA&quot;;
        
        @NotNull(message = &quot;X coordinate is required&quot;)
        private Integer x;
        
        @NotNull(message = &quot;Y coordinate is required&quot;)
        private Integer y;
        
        // Constructors, getters, and setters
<span class="nc" id="L259">        public ShippingAddressDto() {}</span>
        
<span class="nc" id="L261">        public String getStreet() { return street; }</span>
<span class="nc" id="L262">        public void setStreet(String street) { this.street = street; }</span>
        
<span class="nc" id="L264">        public String getCity() { return city; }</span>
<span class="nc" id="L265">        public void setCity(String city) { this.city = city; }</span>
        
<span class="nc" id="L267">        public String getState() { return state; }</span>
<span class="nc" id="L268">        public void setState(String state) { this.state = state; }</span>
        
<span class="nc" id="L270">        public String getZipCode() { return zipCode; }</span>
<span class="nc" id="L271">        public void setZipCode(String zipCode) { this.zipCode = zipCode; }</span>
        
<span class="nc" id="L273">        public String getCountry() { return country; }</span>
<span class="nc" id="L274">        public void setCountry(String country) { this.country = country; }</span>
        
<span class="nc" id="L276">        public Integer getX() { return x; }</span>
<span class="nc" id="L277">        public void setX(Integer x) { this.x = x; }</span>
        
<span class="nc" id="L279">        public Integer getY() { return y; }</span>
<span class="nc" id="L280">        public void setY(Integer y) { this.y = y; }</span>
    }
    
    public static class OrderItemDto {
        @NotBlank(message = &quot;Product ID cannot be blank&quot;)
        private String productId;
        
        @NotBlank(message = &quot;Product name cannot be blank&quot;)
        private String productName;
        
        @Min(value = 1, message = &quot;Quantity must be at least 1&quot;)
        private int quantity;
        
        @DecimalMin(value = &quot;0.01&quot;, message = &quot;Unit price must be positive&quot;)
        private BigDecimal unitPrice;
        
        @DecimalMin(value = &quot;0.01&quot;, message = &quot;Unit weight must be positive&quot;)
        private BigDecimal unitWeight;
        
        // Constructors, getters, and setters
<span class="nc" id="L300">        public OrderItemDto() {}</span>
        
        public OrderItemDto(String productId, String productName, int quantity, 
<span class="nc" id="L303">                           BigDecimal unitPrice, BigDecimal unitWeight) {</span>
<span class="nc" id="L304">            this.productId = productId;</span>
<span class="nc" id="L305">            this.productName = productName;</span>
<span class="nc" id="L306">            this.quantity = quantity;</span>
<span class="nc" id="L307">            this.unitPrice = unitPrice;</span>
<span class="nc" id="L308">            this.unitWeight = unitWeight;</span>
<span class="nc" id="L309">        }</span>
        
<span class="nc" id="L311">        public String getProductId() { return productId; }</span>
<span class="nc" id="L312">        public void setProductId(String productId) { this.productId = productId; }</span>
        
<span class="nc" id="L314">        public String getProductName() { return productName; }</span>
<span class="nc" id="L315">        public void setProductName(String productName) { this.productName = productName; }</span>
        
<span class="nc" id="L317">        public int getQuantity() { return quantity; }</span>
<span class="nc" id="L318">        public void setQuantity(int quantity) { this.quantity = quantity; }</span>
        
<span class="nc" id="L320">        public BigDecimal getUnitPrice() { return unitPrice; }</span>
<span class="nc" id="L321">        public void setUnitPrice(BigDecimal unitPrice) { this.unitPrice = unitPrice; }</span>
        
<span class="nc" id="L323">        public BigDecimal getUnitWeight() { return unitWeight; }</span>
<span class="nc" id="L324">        public void setUnitWeight(BigDecimal unitWeight) { this.unitWeight = unitWeight; }</span>
        
        public BigDecimal getTotalPrice() {
<span class="nc" id="L327">            return unitPrice.multiply(BigDecimal.valueOf(quantity));</span>
        }
        
        public BigDecimal getTotalWeight() {
<span class="nc" id="L331">            return unitWeight.multiply(BigDecimal.valueOf(quantity));</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>