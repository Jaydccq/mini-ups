<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RedisConfig.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Mini UPS Backend</a> &gt; <a href="index.source.html" class="el_package">com.miniups.config</a> &gt; <span class="el_source">RedisConfig.java</span></div><h1>RedisConfig.java</h1><pre class="source lang-java linenums">/**
 * Redis Configuration Class
 * 
 * Purpose:
 * - Configures Redis connectivity and serialization for the Mini-UPS application
 * - Provides optimized Redis templates for different data types and use cases
 * - Establishes caching strategy and session management through Redis
 * - Enables high-performance data storage and retrieval for real-time operations
 * 
 * Core Functionality:
 * - redisTemplate(): General-purpose Redis template with JSON serialization
 * - stringRedisTemplate(): Specialized template for string operations
 * - Custom serialization configuration for optimal performance
 * - Connection factory integration with Spring Boot auto-configuration
 * 
 * Serialization Strategy:
 * - Keys: StringRedisSerializer for human-readable keys and efficient storage
 * - Values: GenericJackson2JsonRedisSerializer for complex object serialization
 * - Hash Keys: StringRedisSerializer for consistent hash field naming
 * - Hash Values: GenericJackson2JsonRedisSerializer for structured data storage
 * 
 * Redis Template Types:
 * 1. RedisTemplate&lt;String, Object&gt;:
 *    - General-purpose template for complex objects
 *    - JSON serialization for easy debugging and cross-platform compatibility
 *    - Supports all Redis data structures (strings, hashes, lists, sets, sorted sets)
 * 
 * 2. StringRedisTemplate:
 *    - Optimized for string-only operations
 *    - Faster serialization/deserialization for simple data
 *    - Ideal for caching simple values, counters, and flags
 * 
 * Use Cases in Mini-UPS:
 * - Session storage for user authentication and WebSocket connections
 * - Caching frequently accessed data (user profiles, truck locations)
 * - Real-time truck location updates and tracking information
 * - Message queuing for asynchronous processing
 * - Rate limiting and throttling for API endpoints
 * 
 * Performance Features:
 * - Connection pooling through RedisConnectionFactory
 * - Efficient serialization reduces network overhead
 * - Pipelining support for batch operations
 * - Transaction support for atomic operations
 * - Pub/Sub messaging for real-time notifications
 * 
 * Integration Points:
 * - Works with Spring Cache abstraction for method-level caching
 * - Integrates with Spring Session for distributed session management
 * - Supports WebSocket session storage for real-time features
 * - Compatible with Spring Boot's Redis auto-configuration
 * 
 * Caching Strategies:
 * - Write-through caching for critical data consistency
 * - Cache-aside pattern for flexible data management
 * - Time-based expiration for temporary data
 * - LRU eviction policies for memory management
 * 
 * Data Structure Usage:
 * - Strings: Simple key-value pairs, counters, flags
 * - Hashes: User sessions, object properties, nested data
 * - Lists: Message queues, activity logs, recent items
 * - Sets: Unique collections, user preferences, tags
 * - Sorted Sets: Leaderboards, time-series data, rankings
 * 
 * Security Considerations:
 * - Redis connection authentication through connection factory
 * - Data serialization security with trusted class configuration
 * - Network encryption support for production environments
 * - Access control through Redis ACL integration
 * 
 * Monitoring and Debugging:
 * - Human-readable keys for easy Redis CLI debugging
 * - JSON serialization allows direct data inspection
 * - Connection metrics through Spring Boot Actuator
 * - Performance monitoring through Redis INFO commands
 * 
 * Configuration Dependencies:
 * - Redis server connection settings in application.properties
 * - Connection pool configuration for optimal performance
 * - Serialization library dependencies (Jackson)
 * - Optional Redis Cluster or Sentinel configuration
 * 
 * Best Practices:
 * - Use appropriate template type based on data complexity
 * - Implement proper key naming conventions for organization
 * - Set expiration times for temporary data to prevent memory leaks
 * - Monitor Redis memory usage and implement eviction policies
 * - Use pipeline operations for bulk data operations
 * 
 * @author Mini-UPS Team
 * @version 1.0.0
 * @since 2024-01-01
 */
package com.miniups.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;
import org.springframework.data.redis.serializer.StringRedisSerializer;

@Configuration
<span class="fc" id="L106">public class RedisConfig {</span>


    @Bean
    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory connectionFactory) {
<span class="fc" id="L111">        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();</span>
<span class="fc" id="L112">        template.setConnectionFactory(connectionFactory);</span>
        
        // String serializer for keys
<span class="fc" id="L115">        StringRedisSerializer stringRedisSerializer = new StringRedisSerializer();</span>
<span class="fc" id="L116">        template.setKeySerializer(stringRedisSerializer);</span>
<span class="fc" id="L117">        template.setHashKeySerializer(stringRedisSerializer);</span>
        
        // JSON serializer for values
<span class="fc" id="L120">        GenericJackson2JsonRedisSerializer jackson2JsonRedisSerializer =</span>
            new GenericJackson2JsonRedisSerializer();
<span class="fc" id="L122">        template.setValueSerializer(jackson2JsonRedisSerializer);</span>
<span class="fc" id="L123">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span>
        
<span class="fc" id="L125">        template.afterPropertiesSet();</span>
<span class="fc" id="L126">        return template;</span>
    }
    
    @Bean
    public StringRedisTemplate stringRedisTemplate(RedisConnectionFactory connectionFactory) {
<span class="fc" id="L131">        return new StringRedisTemplate(connectionFactory);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>